!function t(r,e,n){function o(a,c){if(!e[a]){if(!r[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=e[a]={exports:{}};r[a][0].call(s.exports,function(t){var e=r[a][1][t];return o(e||t)},s,s.exports,t,r,e,n)}return e[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,e){function n({srcImgUrl:t="data/fish.jpg",displaySrcImage:r="yes",quant:e=16,grayscale:n="yes",recolorMode:o="random",renderer:i="replacer",runs:a}){function l(t){u.innerHTML="",s.forEach(function({renderer:r,quant:e,grayscale:n,recolorMode:o},i){var a=document.createElement("canvas");a.setAttribute("id","target-canvas-"+i),u.appendChild(a);var l={img:t.currentTarget,quant:e,grayscale:"yes"===n,recolorMode:o,targetCanvas:a};new c[r](l).start()})}var s;s=a?JSON.parse(decodeURIComponent(a)):[{quant:e,grayscale:n,recolorMode:o,renderer:i}],function(t){var r=t?"remove":"add";document.getElementById("source-canvas").classList[r]("hidden")}("yes"===r),function(){var r=new Image;r.crossOrigin="Anonymous",r.addEventListener("load",l),r.src=t}()}function o(t,r,e,n,o){i(o)}var i=t("handle-error-web"),a=t("route-state")({followRoute:n,windowObject:window}),c={replacer:t("./replacer"),linefiller:t("./linefiller")},u=document.getElementById("target-canvases-container");window.onerror=o,a.routeFromHash()},{"./linefiller":2,"./replacer":14,"handle-error-web":4,"route-state":8}],2:[function(t,r,e){var n,o=t("probable"),i=t("d3-color").hsl;class a{constructor({img:t,quant:r=16,grayscale:e=!1,recolorMode:n="random"}){this.quantizationFactor=r,this.grayscale=e,this.recolorMode=n,this.img=t}start(){console.log("Hey, line filler here. Remember to rewrite all of me!"),this.scaleDownImage(.5)}scaleDownImage(t){var r=this.img,e=document.getElementById("source-canvas");n=r.width;var o=e.getContext("2d"),i=~~(r.width*t),a=~~(r.height*t);e.width=i,e.height=a,this.grayscale&&(o.filter="saturate(0%)"),o.drawImage(r,0,0,i,a),o.filter="none";var c=o.getImageData(0,0,i,a);this.recolor({srcDataArray:Array.from(c.data),smallWidth:i,smallHeight:a,scale:n/i})}recolor({srcDataArray:t,scale:r=1,smallWidth:e,smallHeight:n}){var a=document.getElementById("target-canvas");a.width=e*r,a.height=n*r;for(var c=a.getContext("2d"),u={},l=0;l<t.length;l+=4){let n=t.slice(l,l+4),a=this.rgbaToString(n),s=u[a];if(!s){if("random"===this.recolorMode)s=this.rgbaToString([o.roll(256),o.roll(256),o.roll(256),255]);else if("shiftHue"===this.recolorMode){let t=i(a);t.h=o.roll(360),s=t.toString()}u[a]=s}let f=l/4,h=f%e*r,p=~~(f/e)*r;c.fillStyle=s,c.fillRect(h,p,r,r)}}rgbaToString(t){return`rgba(${t.slice(0,3).map(this.roundColorRawValue.bind(this)).join(", ")}, ${t[3]/255})`}roundColorRawValue(t){return~~(t/this.quantizationFactor)*this.quantizationFactor}}r.exports=a},{"d3-color":3,probable:7}],3:[function(t,r,e){!function(t,n){"object"==typeof e&&void 0!==r?n(e):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function r(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function e(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function n(){}function o(t){var r;return t=(t+"").trim().toLowerCase(),(r=S.exec(t))?(r=parseInt(r[1],16),new l(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1)):(r=R.exec(t))?i(parseInt(r[1],16)):(r=I.exec(t))?new l(r[1],r[2],r[3],1):(r=D.exec(t))?new l(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=C.exec(t))?a(r[1],r[2],r[3],r[4]):(r=F.exec(t))?a(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=P.exec(t))?f(r[1],r[2]/100,r[3]/100,1):(r=q.exec(t))?f(r[1],r[2]/100,r[3]/100,r[4]):T.hasOwnProperty(t)?i(T[t]):"transparent"===t?new l(NaN,NaN,NaN,0):null}function i(t){return new l(t>>16&255,t>>8&255,255&t,1)}function a(t,r,e,n){return n<=0&&(t=r=e=NaN),new l(t,r,e,n)}function c(t){return t instanceof n||(t=o(t)),t?(t=t.rgb(),new l(t.r,t.g,t.b,t.opacity)):new l}function u(t,r,e,n){return 1===arguments.length?c(t):new l(t,r,e,null==n?1:n)}function l(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}function s(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function f(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new p(t,r,e,n)}function h(t,r,e,i){return 1===arguments.length?function(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=o(t)),!t)return new p;if(t instanceof p)return t;var r=(t=t.rgb()).r/255,e=t.g/255,i=t.b/255,a=Math.min(r,e,i),c=Math.max(r,e,i),u=NaN,l=c-a,s=(c+a)/2;return l?(u=r===c?(e-i)/l+6*(e<i):e===c?(i-r)/l+2:(r-e)/l+4,l/=s<.5?c+a:2-c-a,u*=60):l=s>0&&s<1?0:u,new p(u,l,s,t.opacity)}(t):new p(t,r,e,null==i?1:i)}function p(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}function d(t,r,e){return 255*(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)}function y(t){if(t instanceof b)return new b(t.l,t.a,t.b,t.opacity);if(t instanceof A){if(isNaN(t.h))return new b(t.l,0,0,t.opacity);var r=t.h*$;return new b(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}t instanceof l||(t=c(t));var e,n,o=j(t.r),i=j(t.g),a=j(t.b),u=v((.2225045*o+.7168786*i+.0606169*a)/B);return o===i&&i===a?e=n=u:(e=v((.4360747*o+.3850649*i+.1430804*a)/H),n=v((.0139322*o+.0971045*i+.7141733*a)/z)),new b(116*u-16,500*(e-u),200*(u-n),t.opacity)}function g(t,r,e,n){return 1===arguments.length?y(t):new b(t,r,e,null==n?1:n)}function b(t,r,e,n){this.l=+t,this.a=+r,this.b=+e,this.opacity=+n}function v(t){return t>Q?Math.pow(t,1/3):t/W+U}function m(t){return t>V?t*t*t:W*(t-U)}function w(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function j(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _(t){if(t instanceof A)return new A(t.h,t.c,t.l,t.opacity);if(t instanceof b||(t=y(t)),0===t.a&&0===t.b)return new A(NaN,0,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*L;return new A(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function O(t,r,e,n){return 1===arguments.length?_(t):new A(t,r,e,null==n?1:n)}function A(t,r,e,n){this.h=+t,this.c=+r,this.l=+e,this.opacity=+n}function x(t,r,e,n){return 1===arguments.length?function(t){if(t instanceof k)return new k(t.h,t.s,t.l,t.opacity);t instanceof l||(t=c(t));var r=t.r/255,e=t.g/255,n=t.b/255,o=(rt*n+Z*r-tt*e)/(rt+Z-tt),i=n-o,a=(Y*(e-o)-K*i)/X,u=Math.sqrt(a*a+i*i)/(Y*o*(1-o)),s=u?Math.atan2(a,i)*L-120:NaN;return new k(s<0?s+360:s,u,o,t.opacity)}(t):new k(t,r,e,null==n?1:n)}function k(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}var M="\\s*([+-]?\\d+)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S=/^#([0-9a-f]{3})$/,R=/^#([0-9a-f]{6})$/,I=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),D=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),C=new RegExp("^rgba\\("+[M,M,M,N]+"\\)$"),F=new RegExp("^rgba\\("+[E,E,E,N]+"\\)$"),P=new RegExp("^hsl\\("+[N,E,E]+"\\)$"),q=new RegExp("^hsla\\("+[N,E,E,N]+"\\)$"),T={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r(n,o,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(l,u,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new l(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new l(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+s(this.r)+s(this.g)+s(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(p,h,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,o=2*e-n;return new l(d(t>=240?t-240:t+120,o,n),d(t,o,n),d(t<120?t+240:t-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var $=Math.PI/180,L=180/Math.PI,H=.96422,B=1,z=.82521,U=4/29,V=6/29,W=3*V*V,Q=V*V*V;r(b,g,e(n,{brighter:function(t){return new b(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new b(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return r=H*m(r),t=B*m(t),e=z*m(e),new l(w(3.1338561*r-1.6168667*t-.4906146*e),w(-.9787684*r+1.9161415*t+.033454*e),w(.0719453*r-.2289914*t+1.4052427*e),this.opacity)}})),r(A,O,e(n,{brighter:function(t){return new A(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new A(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return y(this).rgb()}}));var G=-.14861,J=1.78277,K=-.29227,X=-.90649,Y=1.97294,Z=Y*X,tt=Y*J,rt=J*K-X*G;r(k,x,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new k(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new k(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*$,r=+this.l,e=isNaN(this.s)?0:this.s*r*(1-r),n=Math.cos(t),o=Math.sin(t);return new l(255*(r+e*(G*n+J*o)),255*(r+e*(K*n+X*o)),255*(r+e*(Y*n)),this.opacity)}})),t.color=o,t.rgb=u,t.hsl=h,t.lab=g,t.hcl=O,t.lch=function(t,r,e,n){return 1===arguments.length?_(t):new A(e,r,t,null==n?1:n)},t.gray=function(t,r){return new b(t,0,0,null==r?1:r)},t.cubehelix=x,Object.defineProperty(t,"__esModule",{value:!0})})},{}],4:[function(t,r,e){function n(t){if(t){console.error(t,t.stack);var r="";t.name&&(r+=t.name+": "),r+=t.message,t.stack&&(r+=" | "+t.stack.toString()),function(t){var r=document.getElementById("status-message");r.textContent=t,r.classList.remove("hidden")}(r)}}r.exports=n},{}],5:[function(t,r,e){(function(t){function n(t,r){return t.set(r[0],r[1]),t}function o(t,r){return t.add(r),t}function i(t,r,e,n){var o=-1,i=t?t.length:0;for(n&&i&&(e=t[++o]);++o<i;)e=r(e,t[o],o,t);return e}function a(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}function c(t){var r=-1,e=Array(t.size);return t.forEach(function(t,n){e[++r]=[n,t]}),e}function u(t,r){return function(e){return t(r(e))}}function l(t){var r=-1,e=Array(t.size);return t.forEach(function(t){e[++r]=t}),e}function s(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function f(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function h(t){var r=-1,e=t?t.length:0;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}function p(t){this.__data__=new f(t)}function d(t,r){var e=Wt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&k(t)}(t)&&vt.call(t,"callee")&&(!kt.call(t,"callee")||mt.call(t)==D)}(t)?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],n=e.length,o=!!n;for(var i in t)!r&&!vt.call(t,i)||o&&("length"==i||function(t,r){return!!(r=null==r?I:r)&&("number"==typeof t||ot.test(t))&&t>-1&&t%1==0&&t<r}(i,n))||e.push(i);return e}function y(t,r,e){var n=t[r];vt.call(t,r)&&x(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function g(t,r){for(var e=t.length;e--;)if(x(t[e][0],r))return e;return-1}function b(t,r,e,u,s,f,h){var d;if(u&&(d=f?u(t,s,f,h):u(t)),void 0!==d)return d;if(!N(t))return t;var g=Wt(t);if(g){if(d=function(t){var r=t.length,e=t.constructor(r);r&&"string"==typeof t[0]&&vt.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(t),!r)return function(t,r){var e=-1,n=t.length;r||(r=Array(n));for(;++e<n;)r[e]=t[e];return r}(t,d)}else{var v=Vt(t),j=v==P||v==q;if(Qt(t))return function(t,r){if(r)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}(t,r);if(v==L||v==D||j&&!f){if(a(t))return f?t:{};if(d=function(t){return"function"!=typeof t.constructor||O(t)?{}:function(t){return N(t)?xt(t):{}}(At(t))}(j?{}:t),!r)return function(t,r){return w(t,Ut(t),r)}(t,function(t,r){return t&&w(r,E(r),t)}(d,t))}else{if(!it[v])return f?t:{};d=function(t,r,e,a){var u=t.constructor;switch(r){case V:return m(t);case C:case F:return new u(+t);case W:return function(t,r){var e=r?m(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,a);case Q:case G:case J:case K:case X:case Y:case Z:case tt:case rt:return function(t,r){var e=r?m(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}(t,a);case T:return function(t,r,e){return i(r?e(c(t),!0):c(t),n,new t.constructor)}(t,a,e);case $:case z:return new u(t);case H:return function(t){var r=new t.constructor(t.source,et.exec(t));return r.lastIndex=t.lastIndex,r}(t);case B:return function(t,r,e){return i(r?e(l(t),!0):l(t),o,new t.constructor)}(t,a,e);case U:return function(t){return zt?Object(zt.call(t)):{}}(t)}}(t,v,b,r)}}h||(h=new p);var _=h.get(t);if(_)return _;if(h.set(t,d),!g)var A=e?function(t){return function(t,r,e){var n=r(t);return Wt(t)?n:function(t,r){for(var e=-1,n=r.length,o=t.length;++e<n;)t[o+e]=r[e];return t}(n,e(t))}(t,E,Ut)}(t):E(t);return function(t,r){for(var e=-1,n=t?t.length:0;++e<n&&!1!==r(t[e],e,t););}(A||t,function(n,o){A&&(n=t[o=n]),y(d,o,b(n,r,e,u,o,t,h))}),d}function v(t){if(!N(t)||function(t){return!!gt&&gt in t}(t))return!1;return(M(t)||a(t)?wt:nt).test(A(t))}function m(t){var r=new t.constructor(t.byteLength);return new Ot(r).set(new Ot(t)),r}function w(t,r,e,n){e||(e={});for(var o=-1,i=r.length;++o<i;){var a=r[o],c=n?n(e[a],t[a],a,e,t):void 0;y(e,a,void 0===c?t[a]:c)}return e}function j(t,r){var e=t.__data__;return function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}(r)?e["string"==typeof r?"string":"hash"]:e.map}function _(t,r){var e=function(t,r){return null==t?void 0:t[r]}(t,r);return v(e)?e:void 0}function O(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||dt)}function A(t){if(null!=t){try{return bt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function x(t,r){return t===r||t!=t&&r!=r}function k(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=I}(t.length)&&!M(t)}function M(t){var r=N(t)?mt.call(t):"";return r==P||r==q}function N(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function E(t){return k(t)?d(t):function(t){if(!O(t))return St(t);var r=[];for(var e in Object(t))vt.call(t,e)&&"constructor"!=e&&r.push(e);return r}(t)}var S=200,R="__lodash_hash_undefined__",I=9007199254740991,D="[object Arguments]",C="[object Boolean]",F="[object Date]",P="[object Function]",q="[object GeneratorFunction]",T="[object Map]",$="[object Number]",L="[object Object]",H="[object RegExp]",B="[object Set]",z="[object String]",U="[object Symbol]",V="[object ArrayBuffer]",W="[object DataView]",Q="[object Float32Array]",G="[object Float64Array]",J="[object Int8Array]",K="[object Int16Array]",X="[object Int32Array]",Y="[object Uint8Array]",Z="[object Uint8ClampedArray]",tt="[object Uint16Array]",rt="[object Uint32Array]",et=/\w*$/,nt=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,it={};it[D]=it["[object Array]"]=it[V]=it[W]=it[C]=it[F]=it[Q]=it[G]=it[J]=it[K]=it[X]=it[T]=it[$]=it[L]=it[H]=it[B]=it[z]=it[U]=it[Y]=it[Z]=it[tt]=it[rt]=!0,it["[object Error]"]=it[P]=it["[object WeakMap]"]=!1;var at="object"==typeof t&&t&&t.Object===Object&&t,ct="object"==typeof self&&self&&self.Object===Object&&self,ut=at||ct||Function("return this")(),lt="object"==typeof e&&e&&!e.nodeType&&e,st=lt&&"object"==typeof r&&r&&!r.nodeType&&r,ft=st&&st.exports===lt,ht=Array.prototype,pt=Function.prototype,dt=Object.prototype,yt=ut["__core-js_shared__"],gt=function(){var t=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),bt=pt.toString,vt=dt.hasOwnProperty,mt=dt.toString,wt=RegExp("^"+bt.call(vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=ft?ut.Buffer:void 0,_t=ut.Symbol,Ot=ut.Uint8Array,At=u(Object.getPrototypeOf,Object),xt=Object.create,kt=dt.propertyIsEnumerable,Mt=ht.splice,Nt=Object.getOwnPropertySymbols,Et=jt?jt.isBuffer:void 0,St=u(Object.keys,Object),Rt=_(ut,"DataView"),It=_(ut,"Map"),Dt=_(ut,"Promise"),Ct=_(ut,"Set"),Ft=_(ut,"WeakMap"),Pt=_(Object,"create"),qt=A(Rt),Tt=A(It),$t=A(Dt),Lt=A(Ct),Ht=A(Ft),Bt=_t?_t.prototype:void 0,zt=Bt?Bt.valueOf:void 0;s.prototype.clear=function(){this.__data__=Pt?Pt(null):{}},s.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},s.prototype.get=function(t){var r=this.__data__;if(Pt){var e=r[t];return e===R?void 0:e}return vt.call(r,t)?r[t]:void 0},s.prototype.has=function(t){var r=this.__data__;return Pt?void 0!==r[t]:vt.call(r,t)},s.prototype.set=function(t,r){return this.__data__[t]=Pt&&void 0===r?R:r,this},f.prototype.clear=function(){this.__data__=[]},f.prototype.delete=function(t){var r=this.__data__,e=g(r,t);return!(e<0||(e==r.length-1?r.pop():Mt.call(r,e,1),0))},f.prototype.get=function(t){var r=this.__data__,e=g(r,t);return e<0?void 0:r[e][1]},f.prototype.has=function(t){return g(this.__data__,t)>-1},f.prototype.set=function(t,r){var e=this.__data__,n=g(e,t);return n<0?e.push([t,r]):e[n][1]=r,this},h.prototype.clear=function(){this.__data__={hash:new s,map:new(It||f),string:new s}},h.prototype.delete=function(t){return j(this,t).delete(t)},h.prototype.get=function(t){return j(this,t).get(t)},h.prototype.has=function(t){return j(this,t).has(t)},h.prototype.set=function(t,r){return j(this,t).set(t,r),this},p.prototype.clear=function(){this.__data__=new f},p.prototype.delete=function(t){return this.__data__.delete(t)},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,r){var e=this.__data__;if(e instanceof f){var n=e.__data__;if(!It||n.length<S-1)return n.push([t,r]),this;e=this.__data__=new h(n)}return e.set(t,r),this};var Ut=Nt?u(Nt,Object):function(){return[]},Vt=function(t){return mt.call(t)};(Rt&&Vt(new Rt(new ArrayBuffer(1)))!=W||It&&Vt(new It)!=T||Dt&&"[object Promise]"!=Vt(Dt.resolve())||Ct&&Vt(new Ct)!=B||Ft&&"[object WeakMap]"!=Vt(new Ft))&&(Vt=function(t){var r=mt.call(t),e=r==L?t.constructor:void 0,n=e?A(e):void 0;if(n)switch(n){case qt:return W;case Tt:return T;case $t:return"[object Promise]";case Lt:return B;case Ht:return"[object WeakMap]"}return r});var Wt=Array.isArray,Qt=Et||function(){return!1};r.exports=function(t){return b(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,r,e){function n(t,r,e){switch(e.length){case 0:return t.call(r);case 1:return t.call(r,e[0]);case 2:return t.call(r,e[0],e[1]);case 3:return t.call(r,e[0],e[1],e[2])}return t.apply(r,e)}function o(t,r){var e=A(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&w.call(t,"callee")&&(!_.call(t,"callee")||j.call(t)==y)}(t)?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],n=e.length,o=!!n;for(var i in t)!r&&!w.call(t,i)||o&&("length"==i||s(i,n))||e.push(i);return e}function i(t,r,e,n){return void 0===t||f(t,m[e])&&!w.call(n,e)?r:t}function a(t,r,e){var n=t[r];w.call(t,r)&&f(n,e)&&(void 0!==e||r in t)||(t[r]=e)}function c(t){if(!p(t))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(t);var r=function(t){var r=t&&t.constructor,e="function"==typeof r&&r.prototype||m;return t===e}(t),e=[];for(var n in t)("constructor"!=n||!r&&w.call(t,n))&&e.push(n);return e}function u(t,r){return r=O(void 0===r?t.length-1:r,0),function(){for(var e=arguments,o=-1,i=O(e.length-r,0),a=Array(i);++o<i;)a[o]=e[r+o];o=-1;for(var c=Array(r+1);++o<r;)c[o]=e[o];return c[r]=a,n(t,this,c)}}function l(t){return u(function(r,e){var n=-1,o=e.length,i=o>1?e[o-1]:void 0,a=o>2?e[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,r,e){if(!p(e))return!1;var n=typeof r;if("number"==n?h(e)&&s(r,e.length):"string"==n&&r in e)return f(e[r],t);return!1}(e[0],e[1],a)&&(i=o<3?void 0:i,o=1),r=Object(r);++n<o;){var c=e[n];c&&t(r,c,n,i)}return r})}function s(t,r){return!!(r=null==r?d:r)&&("number"==typeof t||v.test(t))&&t>-1&&t%1==0&&t<r}function f(t,r){return t===r||t!=t&&r!=r}function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}(t.length)&&!function(t){var r=p(t)?j.call(t):"";return r==g||r==b}(t)}function p(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}var d=9007199254740991,y="[object Arguments]",g="[object Function]",b="[object GeneratorFunction]",v=/^(?:0|[1-9]\d*)$/,m=Object.prototype,w=m.hasOwnProperty,j=m.toString,_=m.propertyIsEnumerable,O=Math.max,A=Array.isArray,x=l(function(t,r,e,n){!function(t,r,e,n){e||(e={});for(var o=-1,i=r.length;++o<i;){var c=r[o],u=n?n(e[c],t[c],c,e,t):void 0;a(e,c,void 0===u?t[c]:u)}}(r,function(t){return h(t)?o(t,!0):c(t)}(r),t,n)}),k=u(function(t){return t.push(void 0,i),n(x,void 0,t)});r.exports=k},{}],7:[function(t,r,e){function n(t){function r(t){return Math.floor(h()*t)}function e(t){function e(t){return function(t,r){r=+r;for(var e=0;e<t.length;++e){var n=t[e],o=n[0];if(r>=o[0]&&r<=o[1])return n[1]}}(n,t)}var n=t,o=n[n.length-1][0][1]-n[0][0][0]+1;return{outcomeAtIndex:e,roll:function(){var t=e(r(o));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:o,getRangesAndOutcomesArray:function(){return n}}}function n(t){var r=[],e=-1,n=function(t){var r=[];for(var e in t){var n=t[e];r.push([n,e])}return r}(t);return(n=n.sort(o)).forEach(function(t){var n=t[0],o=t[1],i=e+1,a=i+n-1;r.push([[i,a],o]),e=a}),r}function o(t,r){return t[0]>r[0]?-1:1}function i(t){return e(function(t){var r=[];for(var e in t){var n=function(t){var r=t.split("-");if(r.length>2)return;return 1===r.length?[+t,+t]:[+r[0],+r[1]]}(e),o=t[e];if("object"==typeof o)if(Array.isArray(o))o=l(o);else{var c=i(o);"function"==typeof c.roll&&(o=c.roll)}r.push([n,o])}return r.sort(a)}(t))}function a(t,r){return t[0][0]<r[0][0]?-1:1}function c(t){return e(function(t){function r(t){var r=t[0],n=t[1],o=e+r-1,i=[e,o];if(e=o+1,Array.isArray(n))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(n)){var a=c(n);"function"==typeof a.roll&&(n=a.roll)}else n=l(n);return[i,n]}var e=0;return t.map(r)}(t))}function u(t,e){return!t||"number"!=typeof t.length||t.length<1?e:t[r(t.length)]}function l(t,r){return function(){return u(t,r)}}function s(t,r){var e=[];return t.forEach(function(t){r.forEach(function(r){Array.isArray(t)||Array.isArray(r)?e.push(t.concat(r)):e.push([t,r])})}),e}function f(t){for(var e,n=t.length,o=Array(n),i=0;i<n;i++)(e=r(i+1))!==i&&(o[i]=o[e]),o[e]=t[i];return o}var h=Math.random;return t&&t.random&&(h=t.random),{roll:r,rollDie:function(t){return 0===t?0:r(t)+1},createRangeTable:e,createRangeTableFromDict:function(t){return e(n(t))},createTableFromDef:i,createTableFromSizes:c,convertDictToRangesAndOutcomePairs:n,pickFromArray:u,crossArrays:s,getCartesianProduct:function(t){return t.slice(1).reduce(s,t[0])},shuffle:f,sample:function(t,r){return f(t).slice(0,r)},randomFn:h}}var o=n();"object"==typeof r&&(r.exports=o,r.exports.createProbable=n)},{}],8:[function(t,r,e){var n=t("qs"),o=t("lodash.clonedeep"),i=t("lodash.defaults");r.exports=function(t){function r(){c(e())}function e(){return n.parse(u.location.hash.slice(1))}function a(t){var r=u.location.protocol+"//"+u.location.host+u.location.pathname+"#"+n.stringify(t);u.history.pushState(null,null,r)}var c,u;return t&&(c=t.followRoute,u=t.windowObject),u.onhashchange=r,{addToRoute:function(t){var r=i(o(t),e());a(r),c(r)},overwriteRouteEntirely:function(t){a(t),c(t)},routeFromHash:r,unpackEncodedRoute:function(t){var r=n.parse(decodeURIComponent(t));a(r),c(r)}}}},{"lodash.clonedeep":5,"lodash.defaults":6,qs:10}],9:[function(t,r,e){"use strict";var n=String.prototype.replace,o=/%20/g;r.exports={default:"RFC3986",formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],10:[function(t,r,e){"use strict";var n=t("./stringify"),o=t("./parse"),i=t("./formats");r.exports={formats:i,parse:o,stringify:n}},{"./formats":9,"./parse":11,"./stringify":12}],11:[function(t,r,e){"use strict";var n=t("./utils"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,r,e){if(t){var n=e.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),c=a?n.slice(0,a.index):n,u=[];if(c){if(!e.plainObjects&&o.call(Object.prototype,c)&&!e.allowPrototypes)return;u.push(c)}for(var l=0;null!==(a=i.exec(n))&&l<e.depth;){if(l+=1,!e.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!e.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+n.slice(a.index)+"]"),function(t,r,e){for(var n=r,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a)i=(i=[]).concat(n);else{i=e.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(c,10);!isNaN(u)&&a!==c&&String(u)===c&&u>=0&&e.parseArrays&&u<=e.arrayLimit?(i=[])[u]=n:i[c]=n}n=i}return n}(u,r,e)}};r.exports=function(t,r){var e=r?n.assign({},r):{};if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(e.ignoreQueryPrefix=!0===e.ignoreQueryPrefix,e.delimiter="string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,e.depth="number"==typeof e.depth?e.depth:i.depth,e.arrayLimit="number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,e.parseArrays=!1!==e.parseArrays,e.decoder="function"==typeof e.decoder?e.decoder:i.decoder,e.allowDots="boolean"==typeof e.allowDots?e.allowDots:i.allowDots,e.plainObjects="boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,e.allowPrototypes="boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,e.parameterLimit="number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,e.strictNullHandling="boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return e.plainObjects?Object.create(null):{};for(var c="string"==typeof t?function(t,r){for(var e={},n=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=r.parameterLimit===1/0?void 0:r.parameterLimit,c=n.split(r.delimiter,a),u=0;u<c.length;++u){var l,s,f=c[u],h=f.indexOf("]="),p=-1===h?f.indexOf("="):h+1;-1===p?(l=r.decoder(f,i.decoder),s=r.strictNullHandling?null:""):(l=r.decoder(f.slice(0,p),i.decoder),s=r.decoder(f.slice(p+1),i.decoder)),o.call(e,l)?e[l]=[].concat(e[l]).concat(s):e[l]=s}return e}(t,e):t,u=e.plainObjects?Object.create(null):{},l=Object.keys(c),s=0;s<l.length;++s){var f=l[s],h=a(f,c[f],e);u=n.merge(u,h,e)}return n.compact(u)}},{"./utils":13}],12:[function(t,r,e){"use strict";var n=t("./utils"),o=t("./formats"),i={brackets:function(t){return t+"[]"},indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(r,e,o,i,a,u,l,s,f,h,p,d){var y=r;if("function"==typeof l)y=l(e,y);else if(y instanceof Date)y=h(y);else if(null===y){if(i)return u&&!d?u(e,c.encoder):e;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||n.isBuffer(y)){if(u){return[p(d?e:u(e,c.encoder))+"="+p(u(y,c.encoder))]}return[p(e)+"="+p(String(y))]}var g=[];if(void 0===y)return g;var b;if(Array.isArray(l))b=l;else{var v=Object.keys(y);b=s?v.sort(s):v}for(var m=0;m<b.length;++m){var w=b[m];a&&null===y[w]||(g=Array.isArray(y)?g.concat(t(y[w],o(e,w),o,i,a,u,l,s,f,h,p,d)):g.concat(t(y[w],e+(f?"."+w:"["+w+"]"),o,i,a,u,l,s,f,h,p,d)))}return g};r.exports=function(t,r){var e=t,a=r?n.assign({},r):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var l=void 0===a.delimiter?c.delimiter:a.delimiter,s="boolean"==typeof a.strictNullHandling?a.strictNullHandling:c.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:c.skipNulls,h="boolean"==typeof a.encode?a.encode:c.encode,p="function"==typeof a.encoder?a.encoder:c.encoder,d="function"==typeof a.sort?a.sort:null,y=void 0!==a.allowDots&&a.allowDots,g="function"==typeof a.serializeDate?a.serializeDate:c.serializeDate,b="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:c.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var v,m,w=o.formatters[a.format];"function"==typeof a.filter?e=(m=a.filter)("",e):Array.isArray(a.filter)&&(v=m=a.filter);var j=[];if("object"!=typeof e||null===e)return"";var _;_=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var O=i[_];v||(v=Object.keys(e)),d&&v.sort(d);for(var A=0;A<v.length;++A){var x=v[A];f&&null===e[x]||(j=j.concat(u(e[x],x,O,s,f,h?p:null,m,d,y,g,w,b)))}var k=j.join(l),M=!0===a.addQueryPrefix?"?":"";return k.length>0?M+k:""}},{"./formats":9,"./utils":13}],13:[function(t,r,e){"use strict";var n=Object.prototype.hasOwnProperty,o=function(){for(var t=[],r=0;r<256;++r)t.push("%"+((r<16?"0":"")+r.toString(16)).toUpperCase());return t}();e.arrayToObject=function(t,r){for(var e=r&&r.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(e[n]=t[n]);return e},e.merge=function(t,r,o){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var i=t;return Array.isArray(t)&&!Array.isArray(r)&&(i=e.arrayToObject(t,o)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(t,i)?t[i]&&"object"==typeof t[i]?t[i]=e.merge(t[i],r,o):t.push(r):t[i]=r}),t):Object.keys(r).reduce(function(t,i){var a=r[i];return n.call(t,i)?t[i]=e.merge(t[i],a,o):t[i]=a,t},i)},e.assign=function(t,r){return Object.keys(r).reduce(function(t,e){return t[e]=r[e],t},t)},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(r){return t}},e.encode=function(t){if(0===t.length)return t;for(var r="string"==typeof t?t:String(t),e="",n=0;n<r.length;++n){var i=r.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?e+=r.charAt(n):i<128?e+=o[i]:i<2048?e+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?e+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&r.charCodeAt(n)),e+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return e},e.compact=function(t){for(var r=[{obj:{o:t},prop:"o"}],e=[],n=0;n<r.length;++n)for(var o=r[n],i=o.obj[o.prop],a=Object.keys(i),c=0;c<a.length;++c){var u=a[c],l=i[u];"object"==typeof l&&null!==l&&-1===e.indexOf(l)&&(r.push({obj:i,prop:u}),e.push(l))}return function(t){for(var r;t.length;){var e=t.pop();if(r=e.obj[e.prop],Array.isArray(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);e.obj[e.prop]=n}}return r}(r)},e.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},e.isBuffer=function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}],14:[function(t,r,e){var n,o=t("probable"),i=t("d3-color").hsl;class a{constructor({img:t,quant:r,grayscale:e,recolorMode:n,targetCanvas:o}){this.quantizationFactor=r,this.grayscale=e,this.recolorMode=n,this.img=t,this.targetCanvas=o}start(){this.scaleDownImage(.5)}scaleDownImage(t){var r=this.img,e=document.getElementById("source-canvas");n=r.width;var o=e.getContext("2d"),i=~~(r.width*t),a=~~(r.height*t);e.width=i,e.height=a,this.grayscale&&(o.filter="saturate(0%)"),o.drawImage(r,0,0,i,a),o.filter="none";var c=o.getImageData(0,0,i,a);this.recolor({srcDataArray:Array.from(c.data),smallWidth:i,smallHeight:a,scale:n/i})}recolor({srcDataArray:t,scale:r=1,smallWidth:e,smallHeight:n}){var a=this.targetCanvas;a.width=e*r,a.height=n*r;for(var c=a.getContext("2d"),u={},l=0;l<t.length;l+=4){let n=t.slice(l,l+4),a=this.rgbaToString(n),s=u[a];if(!s){if("random"===this.recolorMode)s=this.rgbaToString([o.roll(256),o.roll(256),o.roll(256),255]);else if("shiftHue"===this.recolorMode){let t=i(a);t.h=o.roll(360),s=t.toString()}u[a]=s}let f=l/4,h=f%e*r,p=~~(f/e)*r;c.fillStyle=s,c.fillRect(h,p,r,r)}}rgbaToString(t){return`rgba(${t.slice(0,3).map(this.roundColorRawValue.bind(this)).join(", ")}, ${t[3]/255})`}roundColorRawValue(t){return~~(t/this.quantizationFactor)*this.quantizationFactor}}r.exports=a},{"d3-color":3,probable:7}]},{},[1]);
!function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return o(r||t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){function n(t){if(t.seed){var e=a(t);"yes"===e.hideUi?o(e):(function(){let{input:t,created:e}=s({id:"upload-input",tag:"input"});if(!e)return;t.type="file",t.setAttribute("accept","image/*"),document.body.appendChild(t),t.addEventListener("change",function(){if(t.files.length<1)return;const e=t.files[0];b.addToRoute({srcImgUrl:URL.createObjectURL(e)})})}(),c({id:"rerun-button",text:"Run it again!",onClick:u}),c({id:"download-button",text:"Download the (first) generated image",onClick:y}),e.srcImgUrl&&o(e))}else b.addToRoute({seed:(new Date).toISOString()})}function o(t){function e(e){return Object.assign({},e,{probable:t.probable})}function r(t){t(),requestAnimationFrame(r)}function n(t){w.innerHTML="";var e=d(o)(t.currentTarget);u.forEach(e)}function o(t,e,r){var n=`target-canvas-${r}`,o=document.getElementById(n);o||((o=document.createElement("canvas")).setAttribute("id",n),w.appendChild(o));var i=Object.assign({},e,{img:t,targetCanvas:o,grayscale:"yes"===e.grayscale,showBase:"yes"===e.showBase});l&&l.destroy&&l.destroy(),(l=new m[e.renderer](i)).start()}var i=g(t.seed);t.probable=p({random:i});let u;u=t.runs?JSON.parse(decodeURIComponent(t.runs)).map(a).map(e):[t],function(t){var e=t?"remove":"add";document.getElementById("source-canvas").classList[e]("hidden")}("yes"===t.displaySrcImage),"yes"===t.useCamera?(console.log("loadCameraFrame!"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){function e(){o(i,n,0)}var n=u[0],i=document.getElementById("camera-buffer");i.height=n.videoSize,i.width=n.videoSize,i.srcObject=t,i.play(),n.cameraRefreshInterval?setInterval(e,n.cameraRefreshInterval):r(e)}).catch(function(t){console.log("An error occurred! "+t)})):function(){var e=new Image;e.crossOrigin="Anonymous",e.addEventListener("load",n),e.src=t.srcImgUrl}()}function i(t,e,r,n,o){f(o)}function a(t){return Object.assign({},v,t)}function u(){b.addToRoute({seed:(new Date).toISOString()})}function c({id:t,text:e,onClick:r}){let{button:n,created:o}=s({id:t,tag:"button"});o&&(n.textContent=e,n.addEventListener("click",r),document.body.appendChild(n))}function s({id:t,tag:e}){let r=document.getElementById(t),n=!1;return r||(n=!0,(r=document.createElement(e)).id=t),{[e]:r,created:n}}var l,f=t("handle-error-web"),h=t("route-state"),d=t("lodash.curry"),p=t("probable").createProbable,g=t("seedrandom"),y=t("./download-from-target-canvas"),v={srcImgUrl:"data/fish.jpg",useCamera:"no",cameraRefreshInterval:1e3,videoSize:640,displaySrcImage:"yes",quant:16,grayscale:"yes",recolorMode:"random",renderer:"replacer",showBase:"no",opacityPercentOverBase:50,numberOfRetriesToAvoidSingleColor:5,minimumValueDifference:0,tolerance:10,maxLength:2048,useWholeNumberScaleUpFactor:"yes",hideUi:"no",swapColorPerFrame:"no",swapColorPerPixel:"no",swapColorPerAlternateRow:"no"},b=h({followRoute:n,windowObject:window}),m={replacer:t("./replacer"),linefiller:t("./linefiller"),igniter:t("./igniter")},w=document.getElementById("target-canvases-container");window.onerror=i,b.routeFromHash()},{"./download-from-target-canvas":2,"./igniter":4,"./linefiller":5,"./replacer":27,"handle-error-web":8,"lodash.curry":10,probable:12,"route-state":18,seedrandom:19}],2:[function(t,e,r){function n(t){window.location.href=window.URL.createObjectURL(t)}e.exports=function(){document.getElementById("target-canvas-0").toBlob(n)}},{}],3:[function(t,e,r){var n=t("probable"),o=t("d3-color").hsl;e.exports=function({originalString:t,newForOld:e,recolorMode:r="random",rgbaToString:i}){if("none"===r)return t;let a=e[t];if(!a){if("random"===r)a=i([n.roll(256),n.roll(256),n.roll(256),255]);else if("shiftHue"===r){let e=o(t);e.h=n.roll(360),a=e.toString()}e[t]=a}return a}},{"d3-color":7,probable:12}],4:[function(t,e,r){var n=t("probable");class o{constructor(t){this.img=t.img,this.targetCanvas=t.targetCanvas,this.targetCtx=this.targetCanvas.getContext("2d"),this.showBase=t.showBase,this.opacityPercentOverBase=t.opacityPercentOverBase,this.boundDrawFrame=this.drawFrame.bind(this),this.frameCount=0,this.swapColorPerFrame="yes"===t.swapColorPerFrame,this.swapColorPerPixel="yes"===t.swapColorPerPixel,this.swapColorPerAlternateRow="yes"===t.swapColorPerAlternateRow,this.lastAnimationRequestId,this.shuffleSwappedColors()}destroy(){this.lastAnimationRequestId&&window.cancelAnimationFrame(this.lastAnimationRequestId)}start(){this.imgData=this.initCanvases(),this.lastAnimationRequestId=requestAnimationFrame(this.boundDrawFrame)}initCanvases(){var t=this.img,e=document.getElementById("source-canvas"),r=e.getContext("2d");return e.width=t.width,e.height=t.height,this.outputBuffer=new Uint8ClampedArray(t.width*t.height*4),r.drawImage(t,0,0,t.width,t.height),this.targetCanvas.width=t.width,this.targetCanvas.height=t.height,r.getImageData(0,0,t.width,t.height)}drawFrame(){this.swapColorPerFrame&&this.shuffleSwappedColors();for(var t=0;t<this.imgData.height;++t)for(let e=0;e<this.imgData.width;e++){const r=this.imgData.width*t+e;let n=(r+this.frameCount)%(this.imgData.width*this.imgData.height);t%2==0&&(this.swapColorPerPixelAlternateRow&&this.shuffleSwappedColors(),n=(r-this.frameCount)%(this.imgData.width*this.imgData.height)),this.swapColorPerPixel&&this.shuffleSwappedColors();for(let e=0;e<4;++e){const o=4*r+e;let i=4*n+e;t%2==0&&(e===this.swapColorIndex1?i=4*n+this.swapColorIndex2:e===this.swapColorIndex2&&(i=4*n+this.swapColorIndex2)),this.outputBuffer[i]=this.imgData.data[o]}}this.targetCtx.putImageData(new ImageData(this.outputBuffer,this.imgData.width,this.imgData.height),0,0),this.frameCount++,this.lastAnimationRequestId=requestAnimationFrame(this.boundDrawFrame)}shuffleSwappedColors(){this.swapColorIndex1=n.roll(3),this.swapColorIndex2=n.roll(3)}}e.exports=o},{probable:12}],5:[function(t,e,r){function n(t){return`rgba(${t.slice(0,3).join(", ")}, ${t[3]/255})`}var o=t("./getReplacementColor");class i{constructor(t){this.quantizationFactor=t.quant,this.grayscale=t.grayscale,this.recolorMode=t.recolorMode,this.img=t.img,this.targetCanvas=t.targetCanvas,this.showBase=t.showBase,this.opacityPercentOverBase=t.opacityPercentOverBase,this.numberOfRetriesToAvoidSingleColor=+t.numberOfRetriesToAvoidSingleColor,this.minimumValueDifference=+t.minimumValueDifference,this.tolerance=+t.tolerance}start(){const t=this.drawSrcCanvas();this.recolor({imgData:t})}drawSrcCanvas(){var t=this.img,e=document.getElementById("source-canvas"),r=e.getContext("2d");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}recolor({imgData:t}){this.targetCanvas.width=t.width,this.targetCanvas.height=t.height;const e=this.targetCanvas.getContext("2d");var r={};for(let i=0;i<t.height;i++){let a=0,u=null;for(let c=0;c<t.width;c++){const s=this.getImgDataRgba({imgData:t,x:c,y:i});if(null===u)u=s;else{((function(t,e){let r=0;for(let n=0;n<4;n++)r+=Math.abs(e[n]-t[n]);return r/4})(u,s)>this.tolerance||c===t.width-1)&&(e.beginPath(),e.moveTo(a,i),e.lineTo(c,i),e.strokeStyle=o({originalString:n(u),newForOld:r,recolorMode:this.recolorMode,rgbaToString:n}),e.stroke(),a=c,u=null)}}}}getImgDataRgba({imgData:t,x:e,y:r}){const n=4*(t.width*r+e);return[0,1,2,3].map(function(e){return t.data[n+e]})}}e.exports=i},{"./getReplacementColor":3}],6:[function(t,e,r){},{}],7:[function(t,e,r){!function(t,n){"object"==typeof r&&void 0!==e?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function r(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function n(){}function o(t){var e;return t=(t+"").trim().toLowerCase(),(e=D.exec(t))?(e=parseInt(e[1],16),new s(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=I.exec(t))?i(parseInt(e[1],16)):(e=M.exec(t))?new s(e[1],e[2],e[3],1):(e=N.exec(t))?new s(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=P.exec(t))?a(e[1],e[2],e[3],e[4]):(e=F.exec(t))?a(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=E.exec(t))?f(e[1],e[2]/100,e[3]/100,1):(e=B.exec(t))?f(e[1],e[2]/100,e[3]/100,e[4]):q.hasOwnProperty(t)?i(q[t]):"transparent"===t?new s(NaN,NaN,NaN,0):null}function i(t){return new s(t>>16&255,t>>8&255,255&t,1)}function a(t,e,r,n){return n<=0&&(t=e=r=NaN),new s(t,e,r,n)}function u(t){return t instanceof n||(t=o(t)),t?(t=t.rgb(),new s(t.r,t.g,t.b,t.opacity)):new s}function c(t,e,r,n){return 1===arguments.length?u(t):new s(t,e,r,null==n?1:n)}function s(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function l(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function f(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new d(t,e,r,n)}function h(t,e,r,i){return 1===arguments.length?function(t){if(t instanceof d)return new d(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=o(t)),!t)return new d;if(t instanceof d)return t;var e=(t=t.rgb()).r/255,r=t.g/255,i=t.b/255,a=Math.min(e,r,i),u=Math.max(e,r,i),c=NaN,s=u-a,l=(u+a)/2;return s?(c=e===u?(r-i)/s+6*(r<i):r===u?(i-e)/s+2:(e-r)/s+4,s/=l<.5?u+a:2-u-a,c*=60):s=l>0&&l<1?0:c,new d(c,s,l,t.opacity)}(t):new d(t,e,r,null==i?1:i)}function d(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function p(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function g(t){if(t instanceof v)return new v(t.l,t.a,t.b,t.opacity);if(t instanceof _){if(isNaN(t.h))return new v(t.l,0,0,t.opacity);var e=t.h*T;return new v(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof s||(t=u(t));var r,n,o=x(t.r),i=x(t.g),a=x(t.b),c=b((.2225045*o+.7168786*i+.0606169*a)/U);return o===i&&i===a?r=n=c:(r=b((.4360747*o+.3850649*i+.1430804*a)/L),n=b((.0139322*o+.0971045*i+.7141733*a)/z)),new v(116*c-16,500*(r-c),200*(c-n),t.opacity)}function y(t,e,r,n){return 1===arguments.length?g(t):new v(t,e,r,null==n?1:n)}function v(t,e,r,n){this.l=+t,this.a=+e,this.b=+r,this.opacity=+n}function b(t){return t>X?Math.pow(t,1/3):t/W+H}function m(t){return t>V?t*t*t:W*(t-H)}function w(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function x(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j(t){if(t instanceof _)return new _(t.h,t.c,t.l,t.opacity);if(t instanceof v||(t=g(t)),0===t.a&&0===t.b)return new _(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*$;return new _(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function O(t,e,r,n){return 1===arguments.length?j(t):new _(t,e,r,null==n?1:n)}function _(t,e,r,n){this.h=+t,this.c=+e,this.l=+r,this.opacity=+n}function A(t,e,r,n){return 1===arguments.length?function(t){if(t instanceof C)return new C(t.h,t.s,t.l,t.opacity);t instanceof s||(t=u(t));var e=t.r/255,r=t.g/255,n=t.b/255,o=(et*n+Z*e-tt*r)/(et+Z-tt),i=n-o,a=(Y*(r-o)-J*i)/K,c=Math.sqrt(a*a+i*i)/(Y*o*(1-o)),l=c?Math.atan2(a,i)*$-120:NaN;return new C(l<0?l+360:l,c,o,t.opacity)}(t):new C(t,e,r,null==n?1:n)}function C(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}var k="\\s*([+-]?\\d+)\\s*",S="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",R="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3})$/,I=/^#([0-9a-f]{6})$/,M=new RegExp("^rgb\\("+[k,k,k]+"\\)$"),N=new RegExp("^rgb\\("+[R,R,R]+"\\)$"),P=new RegExp("^rgba\\("+[k,k,k,S]+"\\)$"),F=new RegExp("^rgba\\("+[R,R,R,S]+"\\)$"),E=new RegExp("^hsl\\("+[S,R,R]+"\\)$"),B=new RegExp("^hsla\\("+[S,R,R,S]+"\\)$"),q={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e(n,o,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),e(s,c,r(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new s(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+l(this.r)+l(this.g)+l(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),e(d,h,r(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new d(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new d(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new s(p(t>=240?t-240:t+120,o,n),p(t,o,n),p(t<120?t+240:t-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var T=Math.PI/180,$=180/Math.PI,L=.96422,U=1,z=.82521,H=4/29,V=6/29,W=3*V*V,X=V*V*V;e(v,y,r(n,{brighter:function(t){return new v(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new v(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return e=L*m(e),t=U*m(t),r=z*m(r),new s(w(3.1338561*e-1.6168667*t-.4906146*r),w(-.9787684*e+1.9161415*t+.033454*r),w(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),e(_,O,r(n,{brighter:function(t){return new _(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new _(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return g(this).rgb()}}));var Q=-.14861,G=1.78277,J=-.29227,K=-.90649,Y=1.97294,Z=Y*K,tt=Y*G,et=G*J-K*Q;e(C,A,r(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new C(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new C(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*T,e=+this.l,r=isNaN(this.s)?0:this.s*e*(1-e),n=Math.cos(t),o=Math.sin(t);return new s(255*(e+r*(Q*n+G*o)),255*(e+r*(J*n+K*o)),255*(e+r*(Y*n)),this.opacity)}})),t.color=o,t.rgb=c,t.hsl=h,t.lab=y,t.hcl=O,t.lch=function(t,e,r,n){return 1===arguments.length?j(t):new _(r,e,t,null==n?1:n)},t.gray=function(t,e){return new v(t,0,0,null==e?1:e)},t.cubehelix=A,Object.defineProperty(t,"__esModule",{value:!0})})},{}],8:[function(t,e,r){function n(t){if(t){console.error(t,t.stack);var e="";t.name&&(e+=t.name+": "),e+=t.message,t.stack&&(e+=" | "+t.stack.toString()),function(t){var e=document.getElementById("status-message");e.textContent=t,e.classList.remove("hidden")}(e)}}e.exports=n},{}],9:[function(t,e,r){(function(t){function n(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function i(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function a(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function u(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function c(t,e){return function(r){return t(e(r))}}function s(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function l(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(t){this.__data__=new f(t)}function p(t,e){var r=Wt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&C(t)}(t)&&bt.call(t,"callee")&&(!Ct.call(t,"callee")||mt.call(t)==N)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!bt.call(t,i)||o&&("length"==i||function(t,e){return!!(e=null==e?M:e)&&("number"==typeof t||ot.test(t))&&t>-1&&t%1==0&&t<e}(i,n))||r.push(i);return r}function g(t,e,r){var n=t[e];bt.call(t,e)&&A(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function y(t,e){for(var r=t.length;r--;)if(A(t[r][0],e))return r;return-1}function v(t,e,r,c,l,f,h){var p;if(c&&(p=f?c(t,l,f,h):c(t)),void 0!==p)return p;if(!S(t))return t;var y=Wt(t);if(y){if(p=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&bt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,p)}else{var b=Vt(t),x=b==E||b==B;if(Xt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(b==$||b==N||x&&!f){if(a(t))return f?t:{};if(p=function(t){return"function"!=typeof t.constructor||O(t)?{}:function(t){return S(t)?At(t):{}}(_t(t))}(x?{}:t),!e)return function(t,e){return w(t,Ht(t),e)}(t,function(t,e){return t&&w(e,R(e),t)}(p,t))}else{if(!it[b])return f?t:{};p=function(t,e,r,a){var c=t.constructor;switch(e){case V:return m(t);case P:case F:return new c(+t);case W:return function(t,e){var r=e?m(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,a);case X:case Q:case G:case J:case K:case Y:case Z:case tt:case et:return function(t,e){var r=e?m(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,a);case q:return function(t,e,r){return i(e?r(u(t),!0):u(t),n,new t.constructor)}(t,a,r);case T:case z:return new c(t);case L:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case U:return function(t,e,r){return i(e?r(s(t),!0):s(t),o,new t.constructor)}(t,a,r);case H:return function(t){return zt?Object(zt.call(t)):{}}(t)}}(t,b,v,e)}}h||(h=new d);var j=h.get(t);if(j)return j;if(h.set(t,p),!y)var _=r?function(t){return function(t,e,r){var n=e(t);return Wt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,R,Ht)}(t):R(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(_||t,function(n,o){_&&(n=t[o=n]),g(p,o,v(n,e,r,c,o,t,h))}),p}function b(t){if(!S(t)||function(t){return!!yt&&yt in t}(t))return!1;return(k(t)||a(t)?wt:nt).test(_(t))}function m(t){var e=new t.constructor(t.byteLength);return new Ot(e).set(new Ot(t)),e}function w(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],u=n?n(r[a],t[a],a,r,t):void 0;g(r,a,void 0===u?t[a]:u)}return r}function x(t,e){var r=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function j(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return b(r)?r:void 0}function O(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||pt)}function _(t){if(null!=t){try{return vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function A(t,e){return t===e||t!=t&&e!=e}function C(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=M}(t.length)&&!k(t)}function k(t){var e=S(t)?mt.call(t):"";return e==E||e==B}function S(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function R(t){return C(t)?p(t):function(t){if(!O(t))return Dt(t);var e=[];for(var r in Object(t))bt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var D=200,I="__lodash_hash_undefined__",M=9007199254740991,N="[object Arguments]",P="[object Boolean]",F="[object Date]",E="[object Function]",B="[object GeneratorFunction]",q="[object Map]",T="[object Number]",$="[object Object]",L="[object RegExp]",U="[object Set]",z="[object String]",H="[object Symbol]",V="[object ArrayBuffer]",W="[object DataView]",X="[object Float32Array]",Q="[object Float64Array]",G="[object Int8Array]",J="[object Int16Array]",K="[object Int32Array]",Y="[object Uint8Array]",Z="[object Uint8ClampedArray]",tt="[object Uint16Array]",et="[object Uint32Array]",rt=/\w*$/,nt=/^\[object .+?Constructor\]$/,ot=/^(?:0|[1-9]\d*)$/,it={};it[N]=it["[object Array]"]=it[V]=it[W]=it[P]=it[F]=it[X]=it[Q]=it[G]=it[J]=it[K]=it[q]=it[T]=it[$]=it[L]=it[U]=it[z]=it[H]=it[Y]=it[Z]=it[tt]=it[et]=!0,it["[object Error]"]=it[E]=it["[object WeakMap]"]=!1;var at="object"==typeof t&&t&&t.Object===Object&&t,ut="object"==typeof self&&self&&self.Object===Object&&self,ct=at||ut||Function("return this")(),st="object"==typeof r&&r&&!r.nodeType&&r,lt=st&&"object"==typeof e&&e&&!e.nodeType&&e,ft=lt&&lt.exports===st,ht=Array.prototype,dt=Function.prototype,pt=Object.prototype,gt=ct["__core-js_shared__"],yt=function(){var t=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vt=dt.toString,bt=pt.hasOwnProperty,mt=pt.toString,wt=RegExp("^"+vt.call(bt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=ft?ct.Buffer:void 0,jt=ct.Symbol,Ot=ct.Uint8Array,_t=c(Object.getPrototypeOf,Object),At=Object.create,Ct=pt.propertyIsEnumerable,kt=ht.splice,St=Object.getOwnPropertySymbols,Rt=xt?xt.isBuffer:void 0,Dt=c(Object.keys,Object),It=j(ct,"DataView"),Mt=j(ct,"Map"),Nt=j(ct,"Promise"),Pt=j(ct,"Set"),Ft=j(ct,"WeakMap"),Et=j(Object,"create"),Bt=_(It),qt=_(Mt),Tt=_(Nt),$t=_(Pt),Lt=_(Ft),Ut=jt?jt.prototype:void 0,zt=Ut?Ut.valueOf:void 0;l.prototype.clear=function(){this.__data__=Et?Et(null):{}},l.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},l.prototype.get=function(t){var e=this.__data__;if(Et){var r=e[t];return r===I?void 0:r}return bt.call(e,t)?e[t]:void 0},l.prototype.has=function(t){var e=this.__data__;return Et?void 0!==e[t]:bt.call(e,t)},l.prototype.set=function(t,e){return this.__data__[t]=Et&&void 0===e?I:e,this},f.prototype.clear=function(){this.__data__=[]},f.prototype.delete=function(t){var e=this.__data__,r=y(e,t);return!(r<0||(r==e.length-1?e.pop():kt.call(e,r,1),0))},f.prototype.get=function(t){var e=this.__data__,r=y(e,t);return r<0?void 0:e[r][1]},f.prototype.has=function(t){return y(this.__data__,t)>-1},f.prototype.set=function(t,e){var r=this.__data__,n=y(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},h.prototype.clear=function(){this.__data__={hash:new l,map:new(Mt||f),string:new l}},h.prototype.delete=function(t){return x(this,t).delete(t)},h.prototype.get=function(t){return x(this,t).get(t)},h.prototype.has=function(t){return x(this,t).has(t)},h.prototype.set=function(t,e){return x(this,t).set(t,e),this},d.prototype.clear=function(){this.__data__=new f},d.prototype.delete=function(t){return this.__data__.delete(t)},d.prototype.get=function(t){return this.__data__.get(t)},d.prototype.has=function(t){return this.__data__.has(t)},d.prototype.set=function(t,e){var r=this.__data__;if(r instanceof f){var n=r.__data__;if(!Mt||n.length<D-1)return n.push([t,e]),this;r=this.__data__=new h(n)}return r.set(t,e),this};var Ht=St?c(St,Object):function(){return[]},Vt=function(t){return mt.call(t)};(It&&Vt(new It(new ArrayBuffer(1)))!=W||Mt&&Vt(new Mt)!=q||Nt&&"[object Promise]"!=Vt(Nt.resolve())||Pt&&Vt(new Pt)!=U||Ft&&"[object WeakMap]"!=Vt(new Ft))&&(Vt=function(t){var e=mt.call(t),r=e==$?t.constructor:void 0,n=r?_(r):void 0;if(n)switch(n){case Bt:return W;case qt:return q;case Tt:return"[object Promise]";case $t:return U;case Lt:return"[object WeakMap]"}return e});var Wt=Array.isArray,Xt=Rt||function(){return!1};e.exports=function(t){return v(t,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,r){(function(t){function r(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function n(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,o,r);var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function o(t){return t!=t}function i(t,e){for(var r=-1,n=t.length,o=0,i=[];++r<n;){var a=t[r];a!==e&&a!==m||(t[r]=m,i[o++]=r)}return i}function a(t){if(!g(t)||function(t){return!!Z&&Z in t}(t))return!1;return(function(t){var e=g(t)?rt.call(t):"";return e==P||e==F}(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?nt:z).test(function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}function u(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=function(t){return g(t)?ot(t):{}}(t.prototype),n=t.apply(r,e);return g(n)?n:r}}function c(t,e,r,n,o,a,l,h,p,g){function y(){for(var w=arguments.length,x=Array(w),O=w;O--;)x[O]=arguments[O];if(j)var _=f(y),k=function(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&n++;return n}(x,_);if(n&&(x=function(t,e,r,n){for(var o=-1,i=t.length,a=r.length,u=-1,c=e.length,s=it(i-a,0),l=Array(c+s),f=!n;++u<c;)l[u]=e[u];for(;++o<a;)(f||o<i)&&(l[r[o]]=t[o]);for(;s--;)l[u++]=t[o++];return l}(x,n,o,j)),a&&(x=function(t,e,r,n){for(var o=-1,i=t.length,a=-1,u=r.length,c=-1,s=e.length,l=it(i-u,0),f=Array(l+s),h=!n;++o<l;)f[o]=t[o];for(var d=o;++c<s;)f[d+c]=e[c];for(;++a<u;)(h||o<i)&&(f[d+r[a]]=t[o++]);return f}(x,a,l,j)),w-=k,j&&w<g){var S=i(x,_);return s(t,e,c,y.placeholder,r,x,S,h,p,g-w)}var R=b?r:this,D=m?R[t]:t;return w=x.length,h?x=function(t,e){var r=t.length,n=at(e.length,r),o=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t);for(;n--;){var i=e[n];t[n]=d(i,r)?o[i]:void 0}return t}(x,h):A&&w>1&&x.reverse(),v&&p<w&&(x.length=p),this&&this!==G&&this instanceof y&&(D=C||u(D)),D.apply(R,x)}var v=e&k,b=e&w,m=e&x,j=e&(O|_),A=e&S,C=m?void 0:u(t);return y}function s(t,e,r,n,o,i,a,u,c,s){var l=e&O;e|=l?A:C,(e&=~(l?C:A))&j||(e&=~(w|x));var f=r(t,e,o,l?i:void 0,l?a:void 0,l?void 0:i,l?void 0:a,u,c,s);return f.placeholder=n,ct(f,t,e)}function l(t,e,n,o,a,l,h,d){var p=e&x;if(!p&&"function"!=typeof t)throw new TypeError(b);var g=o?o.length:0;if(g||(e&=~(A|C),o=a=void 0),h=void 0===h?h:it(v(h),0),d=void 0===d?d:v(d),g-=a?a.length:0,e&C){var y=o,m=a;o=a=void 0}var j=[t,e,n,o,a,y,m,l,h,d];if(t=j[0],e=j[1],n=j[2],o=j[3],a=j[4],!(d=j[9]=null==j[9]?p?0:t.length:it(j[9]-g,0))&&e&(O|_)&&(e&=~(O|_)),e&&e!=w)k=e==O||e==_?function(t,e,n){function o(){for(var u=arguments.length,l=Array(u),h=u,d=f(o);h--;)l[h]=arguments[h];var p=u<3&&l[0]!==d&&l[u-1]!==d?[]:i(l,d);return(u-=p.length)<n?s(t,e,c,o.placeholder,void 0,l,p,void 0,void 0,n-u):r(this&&this!==G&&this instanceof o?a:t,this,l)}var a=u(t);return o}(t,e,d):e!=A&&e!=(w|A)||a.length?c.apply(void 0,j):function(t,e,n,o){function i(){for(var e=-1,u=arguments.length,s=-1,l=o.length,f=Array(l+u),h=this&&this!==G&&this instanceof i?c:t;++s<l;)f[s]=o[s];for(;u--;)f[s++]=arguments[++e];return r(h,a?n:this,f)}var a=e&w,c=u(t);return i}(t,e,n,o);else var k=function(t,e,r){function n(){return(this&&this!==G&&this instanceof n?i:t).apply(o?r:this,arguments)}var o=e&w,i=u(t);return n}(t,e,n);return ct(k,t,e)}function f(t){return t.placeholder}function h(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return a(r)?r:void 0}function d(t,e){return!!(e=null==e?D:e)&&("number"==typeof t||V.test(t))&&t>-1&&t%1==0&&t<e}function p(t,e,r){var n=l(t,O,void 0,void 0,void 0,void 0,void 0,e=r?void 0:e);return n.placeholder=p.placeholder,n}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if(!t)return 0===t?t:0;if((t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&rt.call(t)==E}(t))return M;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(B,"");var r=U.test(t);return r||H.test(t)?W(t.slice(2),r?2:8):L.test(t)?M:+t}(t))===R||t===-R){return(t<0?-1:1)*I}return t==t?t:0}function v(t){var e=y(t),r=e%1;return e==e?r?e-r:e:0}var b="Expected a function",m="__lodash_placeholder__",w=1,x=2,j=4,O=8,_=16,A=32,C=64,k=128,S=512,R=1/0,D=9007199254740991,I=1.7976931348623157e308,M=NaN,N=[["ary",k],["bind",w],["bindKey",x],["curry",O],["curryRight",_],["flip",S],["partial",A],["partialRight",C],["rearg",256]],P="[object Function]",F="[object GeneratorFunction]",E="[object Symbol]",B=/^\s+|\s+$/g,q=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,T=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,L=/^[-+]0x[0-9a-f]+$/i,U=/^0b[01]+$/i,z=/^\[object .+?Constructor\]$/,H=/^0o[0-7]+$/i,V=/^(?:0|[1-9]\d*)$/,W=parseInt,X="object"==typeof t&&t&&t.Object===Object&&t,Q="object"==typeof self&&self&&self.Object===Object&&self,G=X||Q||Function("return this")(),J=Function.prototype,K=Object.prototype,Y=G["__core-js_shared__"],Z=function(){var t=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),tt=J.toString,et=K.hasOwnProperty,rt=K.toString,nt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=Object.create,it=Math.max,at=Math.min,ut=function(){var t=h(Object,"defineProperty"),e=h.name;return e&&e.length>2?t:void 0}(),ct=ut?function(t,e,r){var o=e+"";return ut(t,"toString",{configurable:!0,enumerable:!1,value:function(t){return function(){return t}}(function(t,e){var r=e.length,n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(q,"{\n/* [wrapped with "+e+"] */\n")}(o,function(t,e){return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(N,function(r){var o="_."+r[0];e&r[1]&&!n(t,o)&&t.push(o)}),t.sort()}(function(t){var e=t.match(T);return e?e[1].split($):[]}(o),r)))})}:function(t){return t};p.placeholder={},e.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(t,e,r){function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e){var r=_(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&h(t)}(t)&&w.call(t,"callee")&&(!j.call(t,"callee")||x.call(t)==g)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!w.call(t,i)||o&&("length"==i||l(i,n))||r.push(i);return r}function i(t,e,r,n){return void 0===t||f(t,m[r])&&!w.call(n,r)?e:t}function a(t,e,r){var n=t[e];w.call(t,e)&&f(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function u(t){if(!d(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=function(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||m;return t===r}(t),r=[];for(var n in t)("constructor"!=n||!e&&w.call(t,n))&&r.push(n);return r}function c(t,e){return e=O(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=O(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=r[o];return u[e]=a,n(t,this,u)}}function s(t){return c(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,e,r){if(!d(r))return!1;var n=typeof e;if("number"==n?h(r)&&l(e,r.length):"string"==n&&e in r)return f(r[e],t);return!1}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})}function l(t,e){return!!(e=null==e?p:e)&&("number"==typeof t||b.test(t))&&t>-1&&t%1==0&&t<e}function f(t,e){return t===e||t!=t&&e!=e}function h(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}(t.length)&&!function(t){var e=d(t)?x.call(t):"";return e==y||e==v}(t)}function d(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var p=9007199254740991,g="[object Arguments]",y="[object Function]",v="[object GeneratorFunction]",b=/^(?:0|[1-9]\d*)$/,m=Object.prototype,w=m.hasOwnProperty,x=m.toString,j=m.propertyIsEnumerable,O=Math.max,_=Array.isArray,A=s(function(t,e,r,n){!function(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var u=e[o],c=n?n(r[u],t[u],u,r,t):void 0;a(r,u,void 0===c?t[u]:c)}}(e,function(t){return h(t)?o(t,!0):u(t)}(e),t,n)}),C=c(function(t){return t.push(void 0,i),n(A,void 0,t)});e.exports=C},{}],12:[function(t,e,r){function n(t){function e(t){return Math.floor(h()*t)}function r(t){function r(t){return function(t,e){e=+e;for(var r=0;r<t.length;++r){var n=t[r],o=n[0];if(e>=o[0]&&e<=o[1])return n[1]}}(n,t)}var n=t,o=n[n.length-1][0][1]-n[0][0][0]+1;return{outcomeAtIndex:r,roll:function(){var t=r(e(o));return"function"!=typeof t||"probable_rollOnTable"!==t.name&&"probable_pick"!==t.name?t:t()},length:o,getRangesAndOutcomesArray:function(){return n}}}function n(t){var e=[],r=-1,n=function(t){var e=[];for(var r in t){var n=t[r];e.push([n,r])}return e}(t);return(n=n.sort(o)).forEach(function(t){var n=t[0],o=t[1],i=r+1,a=i+n-1;e.push([[i,a],o]),r=a}),e}function o(t,e){return t[0]>e[0]?-1:1}function i(t){return r(function(t){var e=[];for(var r in t){var n=function(t){var e=t.split("-");if(e.length>2)return;return 1===e.length?[+t,+t]:[+e[0],+e[1]]}(r),o=t[r];if("object"==typeof o)if(Array.isArray(o))o=s(o);else{var u=i(o);"function"==typeof u.roll&&(o=u.roll)}e.push([n,o])}return e.sort(a)}(t))}function a(t,e){return t[0][0]<e[0][0]?-1:1}function u(t){return r(function(t){function e(t){var e=t[0],n=t[1],o=r+e-1,i=[r,o];if(r=o+1,Array.isArray(n))if(function(t){return Array.isArray(t)&&t.length>0&&Array.isArray(t[0])&&2===t[0].length&&"number"==typeof t[0][0]}(n)){var a=u(n);"function"==typeof a.roll&&(n=a.roll)}else n=s(n);return[i,n]}var r=0;return t.map(e)}(t))}function c(t,r){return!t||"number"!=typeof t.length||t.length<1?r:t[e(t.length)]}function s(t,e){return function(){return c(t,e)}}function l(t,e){var r=[];return t.forEach(function(t){e.forEach(function(e){Array.isArray(t)||Array.isArray(e)?r.push(t.concat(e)):r.push([t,e])})}),r}function f(t){for(var r,n=t.length,o=Array(n),i=0;i<n;i++)(r=e(i+1))!==i&&(o[i]=o[r]),o[r]=t[i];return o}var h=Math.random;return t&&t.random&&(h=t.random),{roll:e,rollDie:function(t){return 0===t?0:e(t)+1},createRangeTable:r,createRangeTableFromDict:function(t){return r(n(t))},createTableFromDef:i,createTableFromSizes:u,convertDictToRangesAndOutcomePairs:n,pickFromArray:c,crossArrays:l,getCartesianProduct:function(t){return t.slice(1).reduce(l,t[0])},shuffle:f,sample:function(t,e){return f(t).slice(0,e)},randomFn:h}}var o=n();"object"==typeof e&&(e.exports=o,e.exports.createProbable=n)},{}],13:[function(t,e,r){"use strict";var n=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(t){return n.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],14:[function(t,e,r){"use strict";var n=t("./stringify"),o=t("./parse"),i=t("./formats");e.exports={formats:i,parse:o,stringify:n}},{"./formats":13,"./parse":15,"./stringify":16}],15:[function(t,e,r){"use strict";var n=t("./utils"),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,r){if(t){var n=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),u=a?n.slice(0,a.index):n,c=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;c.push(u)}for(var s=0;null!==(a=i.exec(n))&&s<r.depth;){if(s+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+n.slice(a.index)+"]"),function(t,e,r){for(var n=e,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a)i=(i=[]).concat(n);else{i=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[])[c]=n:i[u]=n}n=i}return n}(c,e,r)}};e.exports=function(t,e){var r=e?n.assign({},e):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===t||null===t||void 0===t)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){for(var r={},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,u=n.split(e.delimiter,a),c=0;c<u.length;++c){var s,l,f=u[c],h=f.indexOf("]="),d=-1===h?f.indexOf("="):h+1;-1===d?(s=e.decoder(f,i.decoder),l=e.strictNullHandling?null:""):(s=e.decoder(f.slice(0,d),i.decoder),l=e.decoder(f.slice(d+1),i.decoder)),o.call(r,s)?r[s]=[].concat(r[s]).concat(l):r[s]=l}return r}(t,r):t,c=r.plainObjects?Object.create(null):{},s=Object.keys(u),l=0;l<s.length;++l){var f=s[l],h=a(f,u[f],r);c=n.merge(c,h,r)}return n.compact(c)}},{"./utils":17}],16:[function(t,e,r){"use strict";var n=t("./utils"),o=t("./formats"),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,r,o,i,a,c,s,l,f,h,d,p){var g=e;if("function"==typeof s)g=s(r,g);else if(g instanceof Date)g=h(g);else if(null===g){if(i)return c&&!p?c(r,u.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||n.isBuffer(g)){if(c){return[d(p?r:c(r,u.encoder))+"="+d(c(g,u.encoder))]}return[d(r)+"="+d(String(g))]}var y=[];if(void 0===g)return y;var v;if(Array.isArray(s))v=s;else{var b=Object.keys(g);v=l?b.sort(l):b}for(var m=0;m<v.length;++m){var w=v[m];a&&null===g[w]||(y=Array.isArray(g)?y.concat(t(g[w],o(r,w),o,i,a,c,s,l,f,h,d,p)):y.concat(t(g[w],r+(f?"."+w:"["+w+"]"),o,i,a,c,s,l,f,h,d,p)))}return y};e.exports=function(t,e){var r=t,a=e?n.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var s=void 0===a.delimiter?u.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:u.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:u.skipNulls,h="boolean"==typeof a.encode?a.encode:u.encode,d="function"==typeof a.encoder?a.encoder:u.encoder,p="function"==typeof a.sort?a.sort:null,g=void 0!==a.allowDots&&a.allowDots,y="function"==typeof a.serializeDate?a.serializeDate:u.serializeDate,v="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:u.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var b,m,w=o.formatters[a.format];"function"==typeof a.filter?r=(m=a.filter)("",r):Array.isArray(a.filter)&&(b=m=a.filter);var x=[];if("object"!=typeof r||null===r)return"";var j;j=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var O=i[j];b||(b=Object.keys(r)),p&&b.sort(p);for(var _=0;_<b.length;++_){var A=b[_];f&&null===r[A]||(x=x.concat(c(r[A],A,O,l,f,h?d:null,m,p,g,y,w,v)))}var C=x.join(s),k=!0===a.addQueryPrefix?"?":"";return C.length>0?k+C:""}},{"./formats":13,"./utils":17}],17:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)void 0!==t[n]&&(r[n]=t[n]);return r};e.exports={arrayToObject:i,assign:function(t,e){return Object.keys(e).reduce(function(t,r){return t[r]=e[r],t},t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var o=e[n],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var c=a[u],s=i[c];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(e.push({obj:i,prop:c}),r.push(s))}return function(t){for(var e;t.length;){var r=t.pop();if(e=r.obj[r.prop],Array.isArray(e)){for(var n=[],o=0;o<e.length;++o)void 0!==e[o]&&n.push(e[o]);r.obj[r.prop]=n}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),r="",n=0;n<e.length;++n){var i=e.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=e.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},isBuffer:function(t){return null!==t&&void 0!==t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,r,o){if(!r)return e;if("object"!=typeof r){if(Array.isArray(e))e.push(r);else{if("object"!=typeof e)return[e,r];(o.plainObjects||o.allowPrototypes||!n.call(Object.prototype,r))&&(e[r]=!0)}return e}if("object"!=typeof e)return[e].concat(r);var a=e;return Array.isArray(e)&&!Array.isArray(r)&&(a=i(e,o)),Array.isArray(e)&&Array.isArray(r)?(r.forEach(function(r,i){n.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t(e[i],r,o):e.push(r):e[i]=r}),e):Object.keys(r).reduce(function(e,i){var a=r[i];return n.call(e,i)?e[i]=t(e[i],a,o):e[i]=a,e},a)}}},{}],18:[function(t,e,r){var n=t("qs"),o=t("lodash.clonedeep"),i=t("lodash.defaults");e.exports=function(t){function e(){u(r())}function r(){return n.parse(c.location.hash.slice(1))}function a(t){var e=c.location.protocol+"//"+c.location.host+c.location.pathname+"#"+n.stringify(t);c.history.pushState(null,null,e)}var u,c;return t&&(u=t.followRoute,c=t.windowObject),c.onhashchange=e,{addToRoute:function(t,e=!0){var n=i(o(t),r());a(n),e&&u(n)},overwriteRouteEntirely:function(t){a(t),u(t)},routeFromHash:e,unpackEncodedRoute:function(t){var e=n.parse(decodeURIComponent(t));a(e),u(e)}}}},{"lodash.clonedeep":9,"lodash.defaults":11,qs:14}],19:[function(t,e,r){var n=t("./lib/alea"),o=t("./lib/xor128"),i=t("./lib/xorwow"),a=t("./lib/xorshift7"),u=t("./lib/xor4096"),c=t("./lib/tychei"),s=t("./seedrandom");s.alea=n,s.xor128=o,s.xorwow=i,s.xorshift7=a,s.xor4096=u,s.tychei=c,e.exports=s},{"./lib/alea":20,"./lib/tychei":21,"./lib/xor128":22,"./lib/xor4096":23,"./lib/xorshift7":24,"./lib/xorwow":25,"./seedrandom":26}],20:[function(t,e,r){!function(t,e,r){function n(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var r=new function(t){var e=this,r=function(){var t=4022871197;return function(e){e=e.toString();for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=r(" "),e.s1=r(" "),e.s2=r(" "),e.s0-=r(t),e.s0<0&&(e.s0+=1),e.s1-=r(t),e.s1<0&&(e.s1+=1),e.s2-=r(t),e.s2<0&&(e.s2+=1),r=null}(t),o=e&&e.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,o&&("object"==typeof o&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.alea=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],21:[function(t,e,r){!function(t,e,r){function n(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var r=new function(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,o=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}(t),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,o&&("object"==typeof o&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],22:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var r=new function(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}(t),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,o&&("object"==typeof o&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],23:[function(t,e,r){!function(t,e,r){function n(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var r=new function(t){var e=this;e.next=function(){var t,r,n=e.w,o=e.X,i=e.i;return e.w=n=n+1640531527|0,r=o[i+34&127],t=o[i=i+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=o[i]=r^t,e.i=i,r+(n^n>>>16)|0},function(t,e){var r,n,o,i,a,u=[],c=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,c=Math.max(c,e.length)),o=0,i=-32;i<c;++i)e&&(n^=e.charCodeAt((i+32)%e.length)),0===i&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(a=a+1640531527|0,o=0==(r=u[127&i]^=n+a)?o+1:0);for(o>=128&&(u[127&(e&&e.length||0)]=-1),o=127,i=512;i>0;--i)n=u[o+34&127],r=u[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,u[o]=n^r;t.w=a,t.X=u,t.i=o}(e,t)}(t),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,o&&(o.X&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],24:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var r=new function(t){var e=this;e.next=function(){var t,r,n=e.x,o=e.i;return t=n[o],t^=t>>>7,r=t^t<<24,t=n[o+1&7],r^=t^t>>>10,t=n[o+3&7],r^=t^t>>>3,t=n[o+4&7],r^=t^t<<7,t=n[o+7&7],t^=t<<13,r^=t^t<<9,n[o]=r,e.i=o+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}(t),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,o&&(o.x&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],25:[function(t,e,r){!function(t,e,r){function n(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var r=new function(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),o=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,o&&("object"==typeof o&&n(o,r),i.state=function(){return n(r,{})}),i}e&&e.exports?e.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o}(0,"object"==typeof e&&e,"function"==typeof define&&define)},{}],26:[function(t,e,r){!function(r,n){function o(t,e,o){var b=[],m=u(a((e=1==e?{entropy:!0}:e||{}).entropy?[t,c(r)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(f):(t=new Uint8Array(f),(l.crypto||l.msCrypto).getRandomValues(t)),c(t)}catch(t){var e=l.navigator,n=e&&e.plugins;return[+new Date,l,n,l.screen,c(r)]}}():t,3),b),w=new function(t){var e,r=t.length,n=this,o=0,i=n.i=n.j=0,a=n.S=[];r||(t=[r++]);for(;o<f;)a[o]=o++;for(o=0;o<f;o++)a[o]=a[i=v&i+t[o%r]+(e=a[o])],a[i]=e;(n.g=function(t){for(var e,r=0,o=n.i,i=n.j,a=n.S;t--;)e=a[o=v&o+1],r=r*f+a[v&(a[o]=a[i=v&i+e])+(a[i]=e)];return n.i=o,n.j=i,r})(f)}(b),x=function(){for(var t=w.g(h),e=p,r=0;t<g;)t=(t+r)*f,e*=f,r=w.g(1);for(;t>=y;)t/=2,e/=2,r>>>=1;return(t+r)/e};return x.int32=function(){return 0|w.g(4)},x.quick=function(){return w.g(4)/4294967296},x.double=x,u(c(w.S),r),(e.pass||o||function(t,e,r,o){return o&&(o.S&&i(o,w),t.state=function(){return i(w,{})}),r?(n[d]=t,e):t})(x,m,"global"in e?e.global:this==n,e.state)}function i(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function a(t,e){var r,n=[],o=typeof t;if(e&&"object"==o)for(r in t)try{n.push(a(t[r],e-1))}catch(t){}return n.length?n:"string"==o?t:t+"\0"}function u(t,e){for(var r,n=t+"",o=0;o<n.length;)e[v&o]=v&(r^=19*e[v&o])+n.charCodeAt(o++);return c(e)}function c(t){return String.fromCharCode.apply(0,t)}var s,l=(0,eval)("this"),f=256,h=6,d="random",p=n.pow(f,h),g=n.pow(2,52),y=2*g,v=f-1;if(n["seed"+d]=o,u(n.random(),r),"object"==typeof e&&e.exports){e.exports=o;try{s=t("crypto")}catch(t){}}else"function"==typeof define&&define.amd&&define(function(){return o})}([],Math)},{crypto:6}],27:[function(t,e,r){function n(t){return i(t).l}var o,i=t("d3-color").hsl;class a{constructor(t){this.quantizationFactor=t.quant,this.grayscale=t.grayscale,this.recolorMode=t.recolorMode,this.img=t.img,this.targetCanvas=t.targetCanvas,this.showBase=t.showBase,this.opacityPercentOverBase=t.opacityPercentOverBase,this.numberOfRetriesToAvoidSingleColor=+t.numberOfRetriesToAvoidSingleColor,this.minimumValueDifference=+t.minimumValueDifference,this.maxLength=+t.maxLength,this.useWholeNumberScaleUpFactor="yes"===t.useWholeNumberScaleUpFactor,this.probable=t.probable}start(){this.scaleDownImage(.5)}scaleDownImage(t){var e=this.img,r=document.getElementById("source-canvas");o=e.width;var n=r.getContext("2d"),i=~~(e.width*t),a=~~(e.height*t);r.width=i,r.height=a,this.grayscale&&(n.filter="saturate(0%)"),n.drawImage(e,0,0,i,a),n.filter="none";var u=n.getImageData(0,0,i,a),c=o/i;if(c*i>this.maxLength||c*a>this.maxLength){let t=i;a>t&&(t=a),c=this.maxLength/t}this.useWholeNumberScaleUpFactor&&(c=~~c)<1&&(c=1),this.recolor({srcDataArray:Array.from(u.data),smallWidth:i,smallHeight:a,scale:c})}recolor({srcDataArray:t,scale:e=1,smallWidth:r,smallHeight:o}){var a=this.targetCanvas;a.width=r*e,a.height=o*e;var u=a.getContext("2d");this.showBase&&(u.filter="saturate(0%)",u.drawImage(this.img,0,0,a.width,a.height),u.filter="none",u.globalAlpha=this.opacityPercentOverBase/100);for(var c=0;c<this.numberOfRetriesToAvoidSingleColor;++c){var s=function({rgbaToString:n,recolorMode:o,probable:a}){for(var c={},s={},l=0;l<t.length;l+=4){let f=n(t.slice(l,l+4)),h=c[f];if(!h){if("random"===o)h=n([a.roll(256),a.roll(256),a.roll(256),255]);else if("shiftHue"===o){let t=i(f);t.h=a.roll(360),h=t.toString()}c[f]=h}let d=l/4,p=d%r*e,g=~~(d/r)*e;u.fillStyle=h,u.fillRect(p,g,e,e),s[h]=!0}return Object.keys(s)}({rgbaToString:this.rgbaToString.bind(this),recolorMode:this.recolorMode,probable:this.probable});if(s.length>1){if(this.minimumValueDifference<=0)break;if(function(t,e){for(var r=t.map(n),o=0;o<r.length;++o)for(let t=o;t<r.length;++t)if(Math.abs(r[o]-r[t])>=e)return!0;return!1}(s,this.minimumValueDifference))break}}}rgbaToString(t){return`rgba(${t.slice(0,3).map(this.roundColorRawValue.bind(this)).join(", ")}, ${t[3]/255})`}roundColorRawValue(t){return~~(t/this.quantizationFactor)*this.quantizationFactor}}e.exports=a},{"d3-color":7}]},{},[1]);